<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>NEURAL CORE v2.2</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,600;1,600&family=JetBrains+Mono:wght@300;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Sharp" rel="stylesheet">

    <style>
        :root {
            --bg: #050505;
            --glass: rgba(20, 20, 20, 0.95);
            --text: #e0e0e0;
            --accent: #ffffff;
            --alert: #ff3333;
            --matrix: #00ff41;
            --border: 1px solid #333;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; user-select: none; -webkit-tap-highlight-color: transparent; }
        
        body {
            background-color: var(--bg);
            color: var(--text);
            font-family: 'JetBrains Mono', monospace;
            /* Use dvh for true mobile full screen */
            height: 100vh;
            height: 100dvh; 
            overflow: hidden;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        /* CRT OVERLAY */
        .scanline {
            position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            background-size: 100% 2px, 3px 100%;
            pointer-events: none;
            z-index: 999;
            opacity: 0.6;
        }

        /* --- OVERLAYS (Success & Redirect) --- */
        .full-screen-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg);
            z-index: 2000;
            display: none; /* Hidden by default */
            justify-content: center; 
            align-items: center;
            text-align: center;
            padding: 40px;
        }
        
        .overlay-text {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.4rem;
            color: var(--text);
            line-height: 1.6;
            font-style: italic;
        }

        .terminal-msg {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            color: var(--matrix);
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }

        /* --- SCREEN 1: BOOT SEQUENCE --- */
        #boot-screen {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg);
            padding: 20px;
            font-size: 12px;
            color: var(--text);
            z-index: 50;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
        }
        .boot-line { margin-bottom: 2px; opacity: 0.7; }
        .boot-highlight { color: var(--matrix); }

        /* --- SCREEN 2: LOGIN --- */
        #login-screen {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg);
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 40;
        }
        
        .login-box { width: 80%; text-align: center; }
        
        #password-input {
            background: transparent;
            border: none;
            border-bottom: 2px solid var(--text);
            color: var(--accent);
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.5rem;
            text-align: center;
            width: 100%;
            padding: 10px;
            margin-top: 20px;
            text-transform: uppercase;
            outline: none;
            letter-spacing: 5px;
            border-radius: 0; /* iOS fix */
        }

        /* --- SCREEN 3: OS DASHBOARD --- */
        #os-dashboard {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            display: none;
            flex-direction: column;
            padding: 20px;
            z-index: 30;
            justify-content: center; /* Center vertical */
        }

        .status-bar {
            position: absolute; top: 20px; left: 20px; right: 20px;
            display: flex; justify-content: space-between;
            font-size: 10px; padding-bottom: 10px; border-bottom: var(--border);
        }

        .dashboard-content {
            margin-top: 40px; /* Space from status bar */
        }

        .app-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 30px;
        }

        .app-icon {
            border: var(--border);
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: 0.2s;
            background: rgba(255,255,255,0.02);
            cursor: pointer;
        }
        
        .app-icon:active { background: var(--accent); color: var(--bg); }
        .material-icons-sharp { font-size: 40px; margin-bottom: 10px; }
        .icon-label { font-size: 12px; letter-spacing: 1px; text-transform: uppercase; }

        /* --- APP MODALS (WINDOWS) --- */
        .app-window {
            position: fixed; bottom: 0; left: 0; width: 100%; height: 0;
            background: var(--bg);
            z-index: 60;
            transition: height 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            border-top: 1px solid var(--text);
        }

        .app-header {
            padding: 20px;
            border-bottom: var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .app-content {
            flex-grow: 1;
            overflow-y: auto;
            padding: 20px;
            font-family: 'Arial', sans-serif; 
            -webkit-overflow-scrolling: touch; /* Smooth scroll iOS */
        }

        /* GHOST APP STYLES */
        .progress-container { margin: 20px 0; border: 1px solid var(--text); padding: 4px; }
        .progress-bar { height: 20px; width: 64%; background: var(--text); }
        .sys-log { font-family: 'JetBrains Mono'; font-size: 10px; color: #666; margin-top: 20px; line-height: 1.4; }

        /* ALBUM APP STYLES */
        .folder-btn {
            width: 100%; padding: 15px; text-align: left;
            background: transparent; border: var(--border);
            color: var(--text); margin-bottom: 10px;
            font-family: 'JetBrains Mono'; cursor: pointer;
        }
        .song-item {
            padding: 15px 0; border-bottom: 1px dashed #333;
            cursor: pointer; display: flex; justify-content: space-between;
        }
        .song-lyrics {
            display: none; padding: 20px 0; color: #bbb;
            white-space: pre-wrap; line-height: 1.6; font-size: 14px;
        }
        .album-header-title {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.5rem;
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 10px;
            border-bottom: 1px dashed var(--text);
            text-transform: uppercase;
        }

        /* SECURITY APP STYLES */
        .log-entry { font-family: 'JetBrains Mono'; font-size: 11px; margin-bottom: 5px; }
        .log-ok { color: var(--matrix); }
        .log-warn { color: var(--alert); }

        /* UTILS */
        .show-app { height: 90vh !important; }
        .active-lyrics { display: block !important; }
        .flex-show { display: flex !important; }
        
    </style>
</head>
<body>

    <div class="scanline"></div>

    <div id="success-overlay" class="full-screen-overlay">
        <div class="overlay-text">
            Welcome, Researcher.<br><br>
            You found the gate.<br><br>
            Don't believe everything you hear in Folder 02...<br>
            some of it was meant to stay encrypted.
        </div>
    </div>

    <div id="redirect-overlay" class="full-screen-overlay">
        <div class="terminal-msg">
            [ESTABLISHING SECURE CHANNEL TO @ANOMIAC.EXE...]
        </div>
    </div>

    <div id="boot-screen">
        <div id="terminal-output"></div>
    </div>

    <div id="login-screen">
        <div style="font-family: 'Cormorant Garamond'; font-size: 2rem; margin-bottom: 10px;">ANOMIAC OS</div>
        <div style="font-size: 10px; opacity: 0.6; letter-spacing: 1px;">[SYSTEM_AUTH_REQUIRED]</div>
        <div class="login-box">
            <input type="text" id="password-input" placeholder="PASSCODE" maxlength="6" autocomplete="off">
        </div>
        <div id="login-msg" style="margin-top: 15px; font-size: 10px; color: var(--alert); height: 12px;"></div>
    </div>

    <div id="os-dashboard">
        <div class="status-bar">
            <span>SECURE_CONNECTION</span>
            <span id="clock">00:00</span>
        </div>

        <div class="dashboard-content">
            <div style="margin-bottom: 30px;">
                <h1 style="font-family: 'Cormorant Garamond'; font-size: 3rem; line-height: 1;">NEURAL<br>CORE<span style="font-size:1rem; font-family:'JetBrains Mono'">v2.2</span></h1>
            </div>

            <div class="app-grid">
                <div class="app-icon" onclick="openApp('ghost')">
                    <span class="material-icons-sharp">folder_special</span>
                    <span class="icon-label">Ghost_Project</span>
                </div>
                
                <div class="app-icon" onclick="openApp('album')">
                    <span class="material-icons-sharp">album</span>
                    <span class="icon-label">Album</span>
                </div>

                <div class="app-icon" onclick="openApp('security')">
                    <span class="material-icons-sharp">security</span>
                    <span class="icon-label">Security</span>
                </div>

                <div class="app-icon" onclick="openInstagram()">
                    <span class="material-icons-sharp">forum</span>
                    <span class="icon-label">Comm-Link</span>
                </div>
            </div>
        </div>
    </div>

    <div id="app-window" class="app-window">
        <div class="app-header">
            <span id="app-title">APP NAME</span>
            <span class="material-icons-sharp" onclick="closeApp()" style="cursor:pointer;">close</span>
        </div>
        <div id="app-content" class="app-content"></div>
    </div>

    <script data-goatcounter="https://anomiac.goatcounter.com/count" async src="//gc.zgo.at/count.js"></script>
    <script src="songs.js"></script>

    <script>
        // --- BOOT SEQUENCE ---
        const bootText = [
            "Initializing Kernel...",
            "Loading Neural Drivers...",
            "Bypassing Firewalls...",
            "Mounting Volume: /GHOST...",
            "Checking Biometrics... FAILED",
            "AUTHENTICATION REQUIRED."
        ];

        let bootIndex = 0;
        const terminal = document.getElementById('terminal-output');

        function runBoot() {
            if (bootIndex < bootText.length) {
                const div = document.createElement('div');
                div.className = 'boot-line';
                if(bootIndex === bootText.length - 1) div.className += ' boot-highlight';
                div.textContent = "> " + bootText[bootIndex];
                terminal.appendChild(div);
                bootIndex++;
                setTimeout(runBoot, 300);
            } else {
                setTimeout(() => {
                    document.getElementById('boot-screen').style.display = 'none';
                    document.getElementById('login-screen').style.display = 'flex';
                    document.getElementById('password-input').focus();
                }, 1000);
            }
        }

        window.onload = runBoot;

        // --- CLOCK ---
        setInterval(() => {
            const now = new Date();
            document.getElementById('clock').innerText = now.getHours().toString().padStart(2,'0') + ":" + now.getMinutes().toString().padStart(2,'0');
        }, 1000);

        // --- LOGIN LOGIC ---
        const passInput = document.getElementById('password-input');
        const loginMsg = document.getElementById('login-msg');
        const successOverlay = document.getElementById('success-overlay');
        const CORRECT_PASS = "ANOMIA";
        let wrongAttempts = 0;

        passInput.addEventListener('keyup', (e) => {
            passInput.value = passInput.value.toUpperCase();
            const val = passInput.value;

            if (val.length === 6) {
                if (val === CORRECT_PASS) {
                    // 1. Success Message on Input
                    loginMsg.style.color = 'var(--matrix)';
                    loginMsg.innerText = "ACCESS GRANTED";
                    passInput.disabled = true;

                    // 2. Show Overlay after brief delay
                    setTimeout(() => {
                         successOverlay.classList.add('flex-show');
                    }, 500);

                    // 3. Hide Overlay and Login, Show Dashboard after 4s
                    setTimeout(() => {
                        successOverlay.classList.remove('flex-show');
                        document.getElementById('login-screen').style.display = 'none';
                        document.getElementById('os-dashboard').style.display = 'flex';
                    }, 2500);

                } else {
                    let matches = 0;
                    for(let i=0; i<6; i++) {
                        if (val[i] === CORRECT_PASS[i]) matches++;
                    }
                    wrongAttempts++;
                    loginMsg.style.color = 'var(--alert)';
                    if (wrongAttempts >= 2) {
                        loginMsg.innerText = `> ${matches}/6 ALIGNED. HINT: THE PASSCODE IS STARING AT YOU.`;
                    } else {
                        loginMsg.innerText = `> ${matches}/6 CHARACTERS ALIGNED.`;
                    }
                }
            } else {
                loginMsg.innerText = "";
            }
        });

        // --- APP SYSTEM ---
        const appWindow = document.getElementById('app-window');
        const appTitle = document.getElementById('app-title');
        const appContent = document.getElementById('app-content');

        function openApp(appName) {
            appWindow.classList.add('show-app');
            
            if (appName === 'ghost') {
                appTitle.innerText = "Operation: GHOST";
                appContent.innerHTML = `
                    <div style="font-family: 'JetBrains Mono'; margin-bottom:10px;">PROJECT COMPLETION:</div>
                    <div class="progress-container">
                        <div class="progress-bar"></div>
                    </div>
                    <div style="text-align:right; font-size:12px;">64%</div>
                    <br>
                    <p style="color: var(--alert); border: 1px solid var(--alert); padding: 10px;">
                        WARNING: CLASSIFIED DATA.
                    </p>
                    <br>
                    <p>I don't know how you got here, but this is classified information about my project.</p>
                    <br>
                    <div class="sys-log">
                        > LOG_ENTRY_992: Data fragmented.<br>
                        > LOG_ENTRY_993: Attempting recovery...<br>
                        > LOG_ENTRY_994: Contact Admin (Anomiac) for full key.
                    </div>
                `;
            } 
            else if (appName === 'security') {
                appTitle.innerText = "SECURITY MONITOR";
                appContent.innerHTML = `<div id="log-feed"></div>`;
                startFakeLogs();
            }
            else if (appName === 'album') {
                appTitle.innerText = "ALBUM";
                renderAlbumMenu();
            }
        }

        function closeApp() {
            appWindow.classList.remove('show-app');
            if(logInterval) clearInterval(logInterval);
        }

        // --- COMM-LINK LOGIC ---
        function openInstagram() {
            const redirectOverlay = document.getElementById('redirect-overlay');
            
            // Show terminal message overlay
            redirectOverlay.classList.add('flex-show');
            
            // Wait 2 seconds, then redirect
            setTimeout(() => {
                window.location.href = "https://www.instagram.com/anomiac.exe?igsh=eXdjMmp4bGZtMHB3";
                // Optional: remove overlay after a bit in case they come back
                setTimeout(() => {
                    redirectOverlay.classList.remove('flex-show');
                }, 1000);
            }, 2000);
        }

        // --- ALBUM LOGIC ---
        function renderAlbumMenu() {
            appContent.innerHTML = `
                <div class="album-header-title">RÉFRACTION DE LA LUMIÈRE</div>
                <button class="folder-btn" onclick="renderCategory(1)">[DIR] I HAVE REASONS TO WRITE THIS</button>
                <button class="folder-btn" onclick="renderCategory(2)">[DIR] I DON'T HAVE A REASON TO WRITE THIS </button>
                <div id="song-list-container" style="margin-top:20px;"></div>
            `;
        }

        function renderCategory(catId) {
            const container = document.getElementById('song-list-container');
            let html = `<div onclick="renderAlbumMenu()" style="margin-bottom:15px; color:var(--alert); cursor:pointer;"> < BACK </div>`;
            
            const songs = catId === 1 ? albumData.category1 : albumData.category2;

            songs.forEach((song, index) => {
                let dir = 'ltr'; 
                let align = 'left';

                if (catId === 1) {
                    dir = 'rtl'; align = 'right';
                } else if (catId === 2 && index === 2) {
                    dir = 'rtl'; align = 'right';
                }

                html += `
                    <div class="song-item" onclick="toggleLyrics('lyr-${index}')">
                        <span>${song.title}</span>
                        <span class="material-icons-sharp" style="font-size:16px;">expand_more</span>
                    </div>
                    <div id="lyr-${index}" class="song-lyrics" style="direction: ${dir}; text-align: ${align};">
                        ${song.lyrics}
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }

        function toggleLyrics(id) {
            const el = document.getElementById(id);
            if (el.style.display === 'block') {
                el.style.display = 'none';
            } else {
                document.querySelectorAll('.song-lyrics').forEach(d => d.style.display = 'none');
                el.style.display = 'block';
            }
        }

        // --- FAKE LOGS LOGIC ---
        let logInterval;
        function startFakeLogs() {
            const container = document.getElementById('log-feed');
            const messages = [
                {text: "Firewall Active", type: "log-ok"},
                {text: "Scanning Ports...", type: "log-ok"},
                {text: "Connection Refused: IP 192.168.0.X", type: "log-warn"},
                {text: "Packet Tracing...", type: "log-ok"},
                {text: "Encryption: AES-256", type: "log-ok"},
                {text: "Node Verification: Success", type: "log-ok"}
            ];
            
            let i = 0;
            container.innerHTML = "";
            logInterval = setInterval(() => {
                const msg = messages[Math.floor(Math.random() * messages.length)];
                container.innerHTML += `<div class="log-entry ${msg.type}">> ${msg.text}</div>`;
                container.scrollTop = container.scrollHeight;
                i++;
                if(i > 20) container.innerHTML = ""; 
            }, 800);
        }

    </script>
</body>
</html>
